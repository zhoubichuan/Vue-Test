---
lang: zh-CN
sidebarDepth: 2
meta:
  - name: description
    content: 个人总结的openlayers学习技术文档-语法
  - name: keywords
    content: vuepress,最新技术文档,vuepress语法,markdown语法
---

# 十一.案例11

## 1.来自两个 16 位 COG 的 NDVI+NDWI
GeoTIFF 图层从两个云优化的 Sentinel 2 GeoTIFF 计算归一化差异植被指数 (NDVI) 和归一化差异水指数 (NDWI)：一个具有 10 m 分辨率和红色和近红外波段，一个具有 60 m分辨率和短波红外通道。NDVI 显示为绿色，NDWI 显示为蓝色。第 4 个波段是 alpha 波段，当源nodata配置了值时会添加该波段
:::demo

```vue
<template>
  <div ref="map" class="map"></div>
</template>

<script>
export default {
  mounted() {
    let {
      Map,
      layer: { WebGLTile: TileLayer },
      source: { GeoTIFF },
    } = ol
    const source = new GeoTIFF({
      sources: [
        {
          url: "https://s2downloads.eox.at/demo/Sentinel-2/3857/R10m.tif",
          bands: [3, 4],
          min: 0,
          nodata: 0,
          max: 65535,
        },
        {
          url: "https://s2downloads.eox.at/demo/Sentinel-2/3857/R60m.tif",
          bands: [9],
          min: 0,
          nodata: 0,
          max: 65535,
        },
      ],
    })
    source.setAttributions(
      "<a href='https://s2maps.eu'>Sentinel-2 cloudless</a> by <a href='https://eox.at/'>EOX IT Services GmbH</a> (Contains modified Copernicus Sentinel data 2019)"
    )
    const ndvi = [
      "/",
      ["-", ["band", 2], ["band", 1]],
      ["+", ["band", 2], ["band", 1]],
    ]
    const ndwi = [
      "/",
      ["-", ["band", 3], ["band", 1]],
      ["+", ["band", 3], ["band", 1]],
    ]
    const map = new Map({
      target: this.$refs.map,
      layers: [
        new TileLayer({
          style: {
            color: [
              "color",
              ["*", 255, ["abs", ["-", ndvi, ndwi]]],
              ["*", 255, ndvi],
              ["*", 255, ndwi],
              ["band", 4],
            ],
          },
          source,
        }),
      ],
      view: source.getView(),
    })
  },
}
</script>
```

:::

## 2.OGC 地图瓦片

:::demo

```vue
<template>
  <div ref="map" class="map"></div>
</template>

<script>
export default {
  mounted() {
    let {
      Map,
      View,
      layer: { Tile: TileLayer },
      source: { OGCMapTile },
    } = ol
    const map = new Map({
      target: this.$refs.map,
      layers: [
        new TileLayer({
          source: new OGCMapTile({
            url: "https://maps.ecere.com/ogcapi/collections/blueMarble/map/tiles/WorldCRS84Quad",
          }),
        }),
      ],
      view: new View({
        projection: "EPSG:4326",
        center:[12579156, 3274244],
        zoom: 1,
      }),
    })
  },
}
</script>
```

:::

## 3.OGC 地图瓦片（地理）

:::demo

```vue
<template>
  <div ref="map" class="map"></div>
</template>

<script>
export default {
  mounted() {
    let {
      Map,
      View,
      layer: { Tile: TileLayer },
      source: { OGCMapTile },
    } = ol
    const map = new Map({
      target: this.$refs.map,
      layers: [
        new TileLayer({
          source: new OGCMapTile({
            url: "https://maps.ecere.com/ogcapi/collections/blueMarble/map/tiles/WorldCRS84Quad",
          }),
        }),
      ],
      view: new View({
        projection: "EPSG:4326",
        center:[12579156, 3274244],
        zoom: 1,
      }),
    })
  },
}
</script>
```

:::

## 4.OGC 矢量瓦片

:::demo

```vue
<template>
  <div ref="map" class="map"></div>
</template>

<script>
export default {
  mounted() {
    let {
      Map,
      View,
      layer: { VectorTile: VectorTileLayer },
      source: { OGCVectorTile },
      format: { MVT },
    } = ol
    const map = new Map({
      target: this.$refs.map,
      layers: [
        new VectorTileLayer({
          source: new OGCVectorTile({
            url: "https://maps.ecere.com/ogcapi/collections/NaturalEarth:cultural:ne_10m_admin_0_countries/tiles/WebMercatorQuad",
            format: new MVT(),
          }),
        }),
      ],
      view: new View({
        center:[12579156, 3274244],
        zoom: 1,
      }),
    })
  },
}
</script>
```

:::

## 5.OpenStreetMap 重新投影

:::demo

```vue
<template>
  <div ref="map" class="map"></div>
</template>

<script>
export default {
  mounted() {
    let {
      Map,
      View,
      layer: { Tile: TileLayer },
      source: { OSM },
    } = ol
    const map = new Map({
      layers: [
        new TileLayer({
          source: new OSM(),
        }),
      ],
      target: this.$refs.map,
      view: new View({
        projection: "EPSG:4326",
        center:[12579156, 3274244],
        zoom: 2,
      }),
    })
  },
}
</script>
```

:::
