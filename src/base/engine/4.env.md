---
lang: zh-CN
sidebarDepth: 2
meta:
  - name: description
    content: 个人总结的openlayers学习技术文档-语法
  - name: keywords
    content: vuepress,最新技术文档,vuepress语法,markdown语法
---

# 四.Layer(TileLayer)

::: tip 前言
OpenLayers 支持从 OSM、Bing、MapBox、Stamen 和其他任何 XYZ 瓦片资源中提取地图瓦片并在前端展示。同时也支持 OGC 的 WMTS 规范的瓦片服务以及 ArcGIS 规范的瓦片服务
:::

<xminder tipkey="b"/>

## 1.瓦片图（TileLayer）

### OSM 瓦片图

:::demo

```vue {17}
<template>
  <div ref="map" class="map"></div>
</template>
<script>
export default {
  mounted() {
    let {
      Map,
      View,
      layer: { WebGLTile: TileLayer },
      source: { OSM },
    } = ol
    new Map({
      target: this.$refs.map,
      layers: [
        new TileLayer({
          source: new OSM(),
        }),
      ],
      view: new View({
        center: [12579156, 3274244],
        zoom: 12,
      }),
    })
  },
}
</script>
```

:::

### Bing 瓦片图

:::demo

```vue
<template>
  <div ref="map" class="map"></div>
  <select ref="layerselect">
    <option value="Aerial">Aerial</option>
    <option value="AerialWithLabelsOnDemand" selected>
      Aerial with labels
    </option>
    <option value="RoadOnDemand">Road</option>
    <option value="CanvasDark">Road dark</option>
    <option value="OrdnanceSurvey">Ordnance Survey</option>
  </select>
</template>

<script>
export default {
  mounted() {
    let {
      Map,
      View,
      layer: { Tile: TileLayer },
      source: { BingMaps },
    } = ol
    const styles = [
      "RoadOnDemand",
      "Aerial",
      "AerialWithLabelsOnDemand",
      "CanvasDark",
      "OrdnanceSurvey",
    ]
    const layers = []
    let i, ii
    for (i = 0, ii = styles.length; i < ii; ++i) {
      layers.push(
        new TileLayer({
          visible: false,
          preload: Infinity,
          source: new BingMaps({
            key: "At3uaebuh_acwoQWMvO4wxKUk91AzfgBEsx5kN37B7XNBL6dI5IQvtKr0fjZvYJc",
            imagerySet: styles[i],
          }),
        })
      )
    }
    const map = new Map({
      layers: layers,
      target: this.$refs.map,
      view: new View({
        center: [-6655.5402445057125, 6709968.258934638],
        zoom: 13,
      }),
    })
    const select = this.$refs.layerselect
    function onChange() {
      const style = select.value
      for (let i = 0, ii = layers.length; i < ii; ++i) {
        layers[i].setVisible(styles[i] === style)
      }
    }
    select.addEventListener("change", onChange)
    onChange()
  },
}
</script>
```

:::

### Stamen 瓦片图

:::demo

```vue
<template>
  <div ref="map" class="map"></div>
</template>

<script>
export default {
  mounted() {
    let {
      Map,
      View,
      layer: { Tile: TileLayer },
      source: { Stamen },
      proj: { fromLonLat },
    } = ol
    const map = new Map({
      layers: [
        new TileLayer({
          source: new Stamen({
            layer: "watercolor",
          }),
        }),
        new TileLayer({
          source: new Stamen({
            layer: "terrain-labels",
          }),
        }),
      ],
      target: this.$refs.map,
      view: new View({
        center: fromLonLat([114.31, 30.52]),
        zoom: 12,
      }),
    })
  },
}
</script>
```

:::

### XYZ 瓦片图

侦听地图 loadstart 和 loadend 事件以在地图顶部显示加载微调器
:::demo

```vue
<template>
  <div ref="map" class="map"></div>
</template>

<script>
export default {
  mounted() {
    let {
      Map,
      View,
      layer: { Tile: TileLayer },
      source: { XYZ },
      proj: { fromLonLat },
    } = ol
    const key = "get_your_own_D6rA4zTHduk6KOKTXzGB"
    const attributions =
      '<a href="https://www.maptiler.com/copyright/" target="_blank">&copy; MapTiler</a> ' +
      '<a href="https://www.openstreetmap.org/copyright" target="_blank">&copy; OpenStreetMap contributors</a>'
    const map = new Map({
      layers: [
        new TileLayer({
          source: new XYZ({
            attributions: attributions,
            url:
              "https://api.maptiler.com/maps/streets/{z}/{x}/{y}.png?key=" +
              key,
            tileSize: 512,
          }),
        }),
      ],
      target: this.$refs.map,
      view: new View({
        center: fromLonLat([114.31, 30.52]),
        zoom: 12,
      }),
    })
    map.on("loadstart", function () {
      map.getTargetElement().classList.add("spinner")
    })
    map.on("loadend", function () {
      map.getTargetElement().classList.remove("spinner")
    })
  },
}
</script>
```

:::

## 2.矢量图（VectorTileLayer）

矢量数据使用矢量数据模型来组织地理信息，矢量数据模型采用离散对象来表示地球表面的空间要素，因此，简单来说，矢量数据包含了各个地理要素的空间坐标与属性信息，这使我们能对地理信息进行细粒度的使用与操作

::: tip 总结
瓦片地图将地理信息以一块块瓦片的形式进行组织并渲染，瓦片的本质是图片，因此不能对瓦片地图进行修改样式、空间分析等操作，而且瓦片不包含属性信息，隐含的空间信息也不能直接获取使用
:::

### Mapbox 矢量瓦片

:::demo

```vue
<template>
  <div ref="map" class="map"></div>
</template>

<script>
export default {
  mounted() {
    let {
      format: { MVT },
      Map,
      View,
      layer: { VectorTile: VectorTileLayer },
      source: { VectorTile: VectorTileSource },
      style: { Fill, Icon, Stroke, Style, Text },
      proj: { fromLonLat },
    } = ol
    const key =
      "pk.eyJ1IjoiemhvdWJpY2h1YW4iLCJhIjoiY2wyZGRleThpMHk5YjNkcDkzMWNveXB0YSJ9.L0LaQDinn6bNDLgQQmcuxQ"
    const map = new Map({
      layers: [
        new VectorTileLayer({
          declutter: true,
          source: new VectorTileSource({
            attributions:
              '© <a href="https://www.mapbox.com/map-feedback/">Mapbox</a> ' +
              '© <a href="https://www.openstreetmap.org/copyright">' +
              "OpenStreetMap contributors</a>",
            format: new MVT(),
            url:
              "https://{a-d}.tiles.mapbox.com/v4/mapbox.mapbox-streets-v6/" +
              "{z}/{x}/{y}.vector.pbf?access_token=" +
              key,
          }),
          style: createMapboxStreetsV6Style(Style, Fill, Stroke, Icon, Text),
        }),
      ],
      target: this.$refs.map,
      view: new View({
        center: [12579156, 3274244],
        zoom: 12,
      }),
    })
  },
}
</script>
```

:::
