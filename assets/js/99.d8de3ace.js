(window.webpackJsonp=window.webpackJsonp||[]).push([[99],{643:function(s,n,e){"use strict";e.r(n);var a={name:"component-doc",components:{"render-demo-0":{render:function(){var s=this.$createElement,n=this._self._c||s;return n("div",[[n("div",{ref:"map",staticClass:"map"})]],2)},staticRenderFns:[],async mounted(){let{format:{GeoJSON:s},geom:{LinearRing:n,LineString:e,MultiLineString:a,MultiPoint:t,MultiPolygon:r,Point:i,Polygon:l},Map:b,View:o,layer:{Tile:c,Vector:u},source:{OSM:p,Vector:v},proj:{fromLonLat:m}}=ol;const _=new v;let C=await this.$axios.get(this.$withBase("/data/geojson/roads-seoul.geojson"));console.log(C);const d=(new s).readFeatures(C.data,{featureProjection:"EPSG:3857"}),f=new this.$jsts.io.OL3Parser;f.inject(i,e,n,l,t,a,r);for(let s=0;s<d.length;s++){const n=d[s],e=f.read(n.getGeometry()).buffer(40);n.setGeometry(f.write(e))}_.addFeatures(d);const g=new u({source:_});new b({layers:[new c({source:new p}),g],target:this.$refs.map,view:new o({center:m([126.979293,37.528787]),zoom:15})})}}}},t=e(3),r=Object(t.a)(a,(function(){var s=this,n=s._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"一-jsts"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#一-jsts"}},[s._v("#")]),s._v(" 一.JSTS")]),s._v(" "),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[s._v("前言")]),s._v(" "),n("p",[s._v("JSTS 是一个符合 OGC 规范的简单要素空间位置判定函数 JavaScript 库，JSTS 也是 Java 类库 JTS 的一个接口，且与 OpenLayer 具有互操作性。")]),s._v(" "),n("p",[s._v("目前原生的 OpenLayers 并不支持空间拓扑关系查询，此类库可以作为重要的补充。通过此类库，可以判断多种空间几何的位置关系，最初建立这个工程的目的是为 web 地图应用提供一套完整的类库来处理和分析简单几何体，但 jsts 也可以作为一个独立的几何库。")])]),s._v(" "),n("p",[s._v("空间运算利用几何函数来接收输入的空间数据，对其进行分析，然后生成输出数据，输出数据为针对输入数据执行分析的派生结果。")]),s._v(" "),n("p",[s._v("可从空间运算中获得的派生数据包括：")]),s._v(" "),n("ul",[n("li",[s._v("作为输入要素周围缓冲区的面")]),s._v(" "),n("li",[s._v("作为对几何集合执行分析的结果的单个要素")]),s._v(" "),n("li",[s._v("作为比较结果以确定不与其他要素位于同一物理空间的要素部分的单个要素")]),s._v(" "),n("li",[s._v("作为比较结果以查找与其他要素的物理空间相交的要素部分的单个要素")]),s._v(" "),n("li",[s._v("由彼此不位于同一物理空间的输入要素部分组成的多部分 (multipart) 要素")]),s._v(" "),n("li",[s._v("作为两个几何的并集的要素")])]),s._v(" "),n("h2",{attrs:{id:"_1-buffer-操作"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-buffer-操作"}},[s._v("#")]),s._v(" 1.Buffer 操作")]),s._v(" "),n("demo-block",{attrs:{options:JSON.parse(decodeURI("%7B%7D"))}},[n("template",{slot:"demo"},[[n("render-demo-0")]],2),s._v(" "),n("template",{slot:"source"},[n("div",{staticClass:"language-vue1 line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('<template>\n  <div ref="map" class="map"></div>\n</template>\n\n<script>\nexport default {\n  async mounted() {\n    let {\n      format: { GeoJSON },\n      geom: {\n        LinearRing,\n        LineString,\n        MultiLineString,\n        MultiPoint,\n        MultiPolygon,\n        Point,\n        Polygon,\n      },\n      Map,\n      View,\n      layer: { Tile: TileLayer, Vector: VectorLayer },\n      source: { OSM, Vector: VectorSource },\n      proj: { fromLonLat },\n    } = ol\n    const source = new VectorSource()\n    let res = await this.$axios.get(\n      this.$withBase("/data/geojson/roads-seoul.geojson")\n    )\n    console.log(res)\n    const format = new GeoJSON()\n    const features = format.readFeatures(res.data, {\n      featureProjection: "EPSG:3857",\n    })\n    const parser = new this.$jsts.io.OL3Parser()\n    parser.inject(\n      Point,\n      LineString,\n      LinearRing,\n      Polygon,\n      MultiPoint,\n      MultiLineString,\n      MultiPolygon\n    )\n    for (let i = 0; i < features.length; i++) {\n      const feature = features[i]\n      const jstsGeom = parser.read(feature.getGeometry())\n      const buffered = jstsGeom.buffer(40)\n      feature.setGeometry(parser.write(buffered))\n    }\n    source.addFeatures(features)\n    const vectorLayer = new VectorLayer({\n      source: source,\n    })\n    const rasterLayer = new TileLayer({\n      source: new OSM(),\n    })\n    const map = new Map({\n      layers: [rasterLayer, vectorLayer],\n      target: this.$refs.map,\n      view: new View({\n        center: fromLonLat([126.979293, 37.528787]),\n        zoom: 15,\n      }),\n    })\n  },\n}\n<\/script>\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br"),n("span",{staticClass:"line-number"},[s._v("57")]),n("br"),n("span",{staticClass:"line-number"},[s._v("58")]),n("br"),n("span",{staticClass:"line-number"},[s._v("59")]),n("br"),n("span",{staticClass:"line-number"},[s._v("60")]),n("br"),n("span",{staticClass:"line-number"},[s._v("61")]),n("br"),n("span",{staticClass:"line-number"},[s._v("62")]),n("br"),n("span",{staticClass:"line-number"},[s._v("63")]),n("br"),n("span",{staticClass:"line-number"},[s._v("64")]),n("br"),n("span",{staticClass:"line-number"},[s._v("65")]),n("br"),n("span",{staticClass:"line-number"},[s._v("66")]),n("br"),n("span",{staticClass:"line-number"},[s._v("67")]),n("br")])])])],2)],1)}),[],!1,null,null,null);n.default=r.exports}}]);